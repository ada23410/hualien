<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>支出統計列表</title>
    <style>
        body {
            height: 100vh;
            background-color: #fafcfe;
        }
        .nav-bar {
            background-color: rgb(250, 250, 250);
            border-bottom: .5px solid #ebebeb;
            box-shadow: 2px 2px 2px 1px rgba(214, 214, 214, 0.2);
        }
        .img-wrap {
            margin: 0 auto;
            width: 30px;
            height: 30px;
        }
        .img-wrap > img {
            width: 100%;
            overflow: hidden;
            object-fit: cover;
        }

        .main {
            width: 100%;
            margin: auto 0
        }
        .title {
            font-size: 1rem;
            color: #4a6d87;
            margin: 0;
            padding: 0;
            border:1px solid transparent ;
            background-color: transparent;
        }
        .expences ,.food,.good,.transit,.entertainment,.education,.live > span {
            font-size: 1rem;
            color: #4a6d87;
        }
        .food,.good,.transit ,.entertainment,.education,.live  {
            background-color: #ffffff;
            border: 1px solid #ebebeb;
            box-shadow: 2px 2px 2px 1px rgba(214, 214, 214, 0.2);
            border-radius: 10px;
            margin: 10px 0 0 0;
            padding: 20px; 
        }
        .user {
            font-size: 1.5rem;
            color: #4a6d87;;
        }
        .container{
            max-width: 90%;
            padding: 30px 20px;    
        }
        #chartdiv {
            width: 100%;
            height: 300px;
        }      
        .table {
            font-size: 0.8rem;
        }    
        .table > .btn{
            font-size: 0.5rem;
        }    
        .table th, .table td {
            text-align: center;
            vertical-align: middle;
        }
        
    </style>
</head>
<body>
    <nav class="nav-bar py-3">
        <div class="img-wrap">
            <img src="./svg/1200px-Emblem_of_Hualien_County_2010.svg.png" alt="花蓮市政府logo">
        </div>
    </nav>
    <div class="main">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="title text-center">支出統計列表</h1>
                    <p class="user text-center">王小明</p>
                </div>
            </div>
            <div class="row">
                <div class="expences col-12 py-2 mt-1 d-flex justify-content-between">   
                    <span>目前總花費</span>
                    <span>$5,500</span> 
                </div>
                <div class="col-12" >
                    <div class="" id="chartdiv">                    
                    </div>
                </div>
            </div>
            <div class="row">              
                <div class="food col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-utensils"></i> &nbsp; 飲食</span>
                    <div class="more">
                        <span>$2,000</span> 
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div>
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放飲食相關明細 -->
                    <table class="table table-borderless">
                        <tbody>
                            <tr>
                                <th scope="row">2022-03-7</th>
                                <td>$100</td>
                                <td>午餐</td>
                                <td>
                                    <div class="edit d-flex">
                                        <button type="button" class="btn"><i class="fa-solid fa-pen"></i></button>
                                        <button type="button" class="btn"><i class="fa-solid fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">2022-03-7</th>
                                <td>$100</td>
                                <td>午餐</td>
                                <td>
                                    <div class="edit d-flex">
                                        <button type="button" class="btn"><i class="fa-solid fa-pen"></i></button>
                                        <button type="button" class="btn"><i class="fa-solid fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">2022-03-7</th>
                                <td>$100</td>
                                <td>午餐</td>
                                <td>
                                    <div class="edit d-flex">
                                        <button type="button" class="btn"><i class="fa-solid fa-pen"></i></button>
                                        <button type="button" class="btn"><i class="fa-solid fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">2022-03-7</th>
                                <td>$100</td>
                                <td>午餐</td>
                                <td>
                                    <div class="edit d-flex">
                                        <button type="button" class="btn"><i class="fa-solid fa-pen"></i></button>
                                        <button type="button" class="btn"><i class="fa-solid fa-trash"></i></button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="good col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-pump-soap"></i> &nbsp; 生活用品</span>
                    <div class="more">
                        <span>$1,000</span>
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div> 
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放生活用品相關明細 -->
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus est, quae architecto odio itaque rem ea doloribus voluptas. Earum dolores odit consequuntur enim beatae doloribus soluta animi nulla reprehenderit voluptatum!
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="transit col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-bus"></i> &nbsp; 交通</span>
                    <div class="more">
                        <span>$1,280</span>
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div>
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放交通相關明細 -->
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus est, quae architecto odio itaque rem ea doloribus voluptas. Earum dolores odit consequuntur enim beatae doloribus soluta animi nulla reprehenderit voluptatum!
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="entertainment col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-gamepad"></i> &nbsp; 娛樂</span> 
                    <div class="more">
                        <span>$800</span>
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div>
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放娛樂相關明細 -->
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus est, quae architecto odio itaque rem ea doloribus voluptas. Earum dolores odit consequuntur enim beatae doloribus soluta animi nulla reprehenderit voluptatum!
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="education col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-book-open"></i> &nbsp; 教育</span>
                    <div class="more">
                        <span>$800</span>
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div>
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放教育相關明細 -->
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus est, quae architecto odio itaque rem ea doloribus voluptas. Earum dolores odit consequuntur enim beatae doloribus soluta animi nulla reprehenderit voluptatum!
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="live col-12 d-flex justify-content-between flip">   
                    <span><i class="fa-solid fa-house"></i> &nbsp; 住宿</span>
                    <div class="more">
                        <span>$800</span>
                        <span><i class="fa-solid fa-angle-right"></i></span>
                    </div>
                </div>
                <div class="panel">
                    <div class="content">
                    <!-- 放住宿相關明細 -->
                        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Temporibus est, quae architecto odio itaque rem ea doloribus voluptas. Earum dolores odit consequuntur enim beatae doloribus soluta animi nulla reprehenderit voluptatum!
                    </div>
                </div>
            </div>     
        </div>
    </div>
    
    <!-- piechart -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script>
    am5.ready(function() {

            // Create root element
            // https://www.amcharts.com/docs/v5/getting-started/#Root_element
            var root = am5.Root.new("chartdiv");


            // Set themes
            // https://www.amcharts.com/docs/v5/concepts/themes/
            root.setThemes([
                am5themes_Animated.new(root)
            ]);


            // Create chart
            // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/
            var chart = root.container.children.push(am5percent.PieChart.new(root, {
                layout: root.verticalLayout,
                innerRadius: am5.percent(50)
            }));


            // Create series
            // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Series
            var series = chart.series.push(am5percent.PieSeries.new(root, {
                valueField: "value",
                categoryField: "category",
                alignLabels: false
            }));

            series.labels.template.setAll({
                fontSize: 12,
                text:"{category}",
                textType: "circular",
                inside: true,
                radius: 10,
                fill: am5.color(0xffffff)
            });


            // Set data
            // https://www.amcharts.com/docs/v5/charts/percent-charts/pie-chart/#Setting_data
            series.data.setAll([
                { value: 1, category: "飲食" },
                { value: 9, category: "生活用品" },
                { value: 6, category: "交通" },
                { value: 5, category: "娛樂" },
                { value: 4, category: "教育" },
                { value: 5, category: "住宿" },
            ]);


            // total
            var label = chart.seriesContainer.children.push(
                am5.Label.new(root, {
                textAlign: "center",
                centerY: am5.p50,
                centerX: am5.p50,
                text: "[bold fontSize:16px]5,500[/]"
            })
            );

            // Create legend
            // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/
            var legend = chart.children.push(am5.Legend.new(root, {
                centerX: am5.percent(50),
                x: am5.percent(50),
                marginTop: 15,
                marginBottom: 15,
            }));

            legend.data.setAll(series.dataItems);


            // Play initial series animation
            // https://www.amcharts.com/docs/v5/concepts/animations/#Animation_of_series
            series.appear(1000, 100);

            }); // end am5.ready()

            // 收合明細
            $(function () {
                $(".flip").click(function (e) {
                    e.preventDefault();
                    //在 div 上動態新增 class
                    $(this).toggleClass("active");
                    //div 在父層元素中，找到 .panel 元素，並且給它滑動效果
                    $(this).parent().find(".panel").slideToggle();
                    //div 在父層元素中，找到其他同層元素，再找到該同層元素的 .panel 標籤，並向上收闔
                    $(this).parent().siblings().find(".panel").slideUp();
                    //h2 在父層元素中，找到其他同層元素，再找到該同層元素的 .flip標籤，並動態移除 class
                    $(this).parent().siblings().find(".flip").removeClass("active");
                });
            });
    </script>
</body>
</html>